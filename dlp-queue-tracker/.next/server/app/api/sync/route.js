/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/sync/route";
exports.ids = ["app/api/sync/route"];
exports.modules = {

/***/ "(rsc)/./app/api/sync/route.ts":
/*!*******************************!*\
  !*** ./app/api/sync/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_services_data_sync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/services/data-sync */ \"(rsc)/./lib/services/data-sync.ts\");\n\n\n// This endpoint will be called by a cron job every 5 minutes\nasync function GET(request) {\n    // Optional: Add authentication to prevent unauthorized access\n    const authHeader = request.headers.get('authorization');\n    const cronSecret = process.env.CRON_SECRET;\n    if (cronSecret && authHeader !== `Bearer ${cronSecret}`) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n    }\n    try {\n        console.log('[API] Starting data sync...');\n        const result = await _lib_services_data_sync__WEBPACK_IMPORTED_MODULE_1__.DataSyncService.syncQueueData();\n        // Calculate daily stats once per day (at midnight or first sync of the day)\n        const hour = new Date().getHours();\n        if (hour === 0 || hour === 23) {\n            await _lib_services_data_sync__WEBPACK_IMPORTED_MODULE_1__.DataSyncService.calculateDailyStats();\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: result.success,\n            ...result\n        });\n    } catch (error) {\n        console.error('[API] Sync error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : 'Unknown error'\n        }, {\n            status: 500\n        });\n    }\n}\n// Also support POST for flexibility\nasync function POST(request) {\n    return GET(request);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3N5bmMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNHO0FBRTNELDZEQUE2RDtBQUN0RCxlQUFlRSxJQUFJQyxPQUFvQjtJQUM1Qyw4REFBOEQ7SUFDOUQsTUFBTUMsYUFBYUQsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFDdkMsTUFBTUMsYUFBYUMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0lBRTFDLElBQUlILGNBQWNILGVBQWUsQ0FBQyxPQUFPLEVBQUVHLFlBQVksRUFBRTtRQUN2RCxPQUFPUCxxREFBWUEsQ0FBQ1csSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQWUsR0FDeEI7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsSUFBSTtRQUNGQyxRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNQyxTQUFTLE1BQU1mLG9FQUFlQSxDQUFDZ0IsYUFBYTtRQUVsRCw0RUFBNEU7UUFDNUUsTUFBTUMsT0FBTyxJQUFJQyxPQUFPQyxRQUFRO1FBQ2hDLElBQUlGLFNBQVMsS0FBS0EsU0FBUyxJQUFJO1lBQzdCLE1BQU1qQixvRUFBZUEsQ0FBQ29CLG1CQUFtQjtRQUMzQztRQUVBLE9BQU9yQixxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQ3ZCVyxTQUFTTixPQUFPTSxPQUFPO1lBQ3ZCLEdBQUdOLE1BQU07UUFDWDtJQUNGLEVBQUUsT0FBT0osT0FBTztRQUNkRSxRQUFRRixLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxPQUFPWixxREFBWUEsQ0FBQ1csSUFBSSxDQUN0QjtZQUNFVyxTQUFTO1lBQ1RWLE9BQU9BLGlCQUFpQlcsUUFBUVgsTUFBTVksT0FBTyxHQUFHO1FBQ2xELEdBQ0E7WUFBRVgsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSxvQ0FBb0M7QUFDN0IsZUFBZVksS0FBS3RCLE9BQW9CO0lBQzdDLE9BQU9ELElBQUlDO0FBQ2IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcc3RpZW5zd28uRVVST1BFXFxEb2N1bWVudHNcXEdpdEh1YlxcRExXYWl0XFxkbHAtcXVldWUtdHJhY2tlclxcYXBwXFxhcGlcXHN5bmNcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBEYXRhU3luY1NlcnZpY2UgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9kYXRhLXN5bmMnO1xuXG4vLyBUaGlzIGVuZHBvaW50IHdpbGwgYmUgY2FsbGVkIGJ5IGEgY3JvbiBqb2IgZXZlcnkgNSBtaW51dGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIC8vIE9wdGlvbmFsOiBBZGQgYXV0aGVudGljYXRpb24gdG8gcHJldmVudCB1bmF1dGhvcml6ZWQgYWNjZXNzXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gIGNvbnN0IGNyb25TZWNyZXQgPSBwcm9jZXNzLmVudi5DUk9OX1NFQ1JFVDtcbiAgXG4gIGlmIChjcm9uU2VjcmV0ICYmIGF1dGhIZWFkZXIgIT09IGBCZWFyZXIgJHtjcm9uU2VjcmV0fWApIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxuICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgKTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnW0FQSV0gU3RhcnRpbmcgZGF0YSBzeW5jLi4uJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgRGF0YVN5bmNTZXJ2aWNlLnN5bmNRdWV1ZURhdGEoKTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgZGFpbHkgc3RhdHMgb25jZSBwZXIgZGF5IChhdCBtaWRuaWdodCBvciBmaXJzdCBzeW5jIG9mIHRoZSBkYXkpXG4gICAgY29uc3QgaG91ciA9IG5ldyBEYXRlKCkuZ2V0SG91cnMoKTtcbiAgICBpZiAoaG91ciA9PT0gMCB8fCBob3VyID09PSAyMykge1xuICAgICAgYXdhaXQgRGF0YVN5bmNTZXJ2aWNlLmNhbGN1bGF0ZURhaWx5U3RhdHMoKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgLi4ucmVzdWx0XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0FQSV0gU3luYyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBBbHNvIHN1cHBvcnQgUE9TVCBmb3IgZmxleGliaWxpdHlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHJldHVybiBHRVQocmVxdWVzdCk7XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkRhdGFTeW5jU2VydmljZSIsIkdFVCIsInJlcXVlc3QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsImNyb25TZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiQ1JPTl9TRUNSRVQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0Iiwic3luY1F1ZXVlRGF0YSIsImhvdXIiLCJEYXRlIiwiZ2V0SG91cnMiLCJjYWxjdWxhdGVEYWlseVN0YXRzIiwic3VjY2VzcyIsIkVycm9yIiwibWVzc2FnZSIsIlBPU1QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/sync/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/themeparks.ts":
/*!*******************************!*\
  !*** ./lib/api/themeparks.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   themeparksAPI: () => (/* binding */ themeparksAPI)\n/* harmony export */ });\nconst API_BASE_URL = 'https://api.themeparks.wiki/v1';\nclass ThemeParksAPI {\n    async fetchAPI(endpoint) {\n        const url = `${API_BASE_URL}${endpoint}`;\n        console.log('Fetching:', url);\n        const response = await fetch(url, {\n            headers: {\n                'Accept': 'application/json'\n            },\n            cache: 'no-store' // Disable caching for real-time data\n        });\n        if (!response.ok) {\n            console.error(`API request failed: ${response.status} ${response.statusText}`);\n            throw new Error(`API request failed: ${response.statusText}`);\n        }\n        return response.json();\n    }\n    async getDestinations() {\n        const data = await this.fetchAPI('/destinations');\n        return data.destinations;\n    }\n    async getEntityLiveData(entityId) {\n        return this.fetchAPI(`/entity/${entityId}/live`);\n    }\n    async getEntitySchedule(entityId) {\n        return this.fetchAPI(`/entity/${entityId}/schedule`);\n    }\n    async getDisneylandParisData() {\n        // First get all destinations to find Disneyland Paris\n        const destinations = await this.getDestinations();\n        // Find Disneyland Paris (usually 'dlp' slug)\n        const dlp = destinations.find((d)=>d.slug === 'dlp' || d.name.toLowerCase().includes('disneyland paris') || d.name.toLowerCase().includes('disney paris'));\n        if (!dlp) {\n            console.error('Disneyland Paris not found in destinations');\n            throw new Error('Disneyland Paris destination not found');\n        }\n        console.log('Found DLP:', dlp);\n        return dlp;\n    }\n    async getAllDisneylandParisLiveData() {\n        try {\n            // Get DLP destination info\n            const dlp = await this.getDisneylandParisData();\n            // Get live data for the entire destination (includes all parks)\n            const liveDataResponse = await this.getEntityLiveData(dlp.id);\n            console.log(`Fetched ${liveDataResponse.liveData.length} entities`);\n            // Find the two parks\n            const disneylandPark = dlp.parks.find((p)=>p.name.includes('Disneyland Park') || p.name === 'Parc Disneyland');\n            const studiosPark = dlp.parks.find((p)=>p.name.includes('Studios') || p.name.includes('Studio'));\n            // Filter attractions by park\n            const disneylandAttractions = [];\n            const studiosAttractions = [];\n            // If we have park IDs, we can get more specific data\n            if (disneylandPark && studiosPark) {\n                // Try to get park-specific data\n                const [dlpParkData, studiosParkData] = await Promise.allSettled([\n                    this.getEntityLiveData(disneylandPark.id),\n                    this.getEntityLiveData(studiosPark.id)\n                ]);\n                if (dlpParkData.status === 'fulfilled') {\n                    disneylandAttractions.push(...dlpParkData.value.liveData.filter((e)=>e.entityType === 'ATTRACTION'));\n                }\n                if (studiosParkData.status === 'fulfilled') {\n                    studiosAttractions.push(...studiosParkData.value.liveData.filter((e)=>e.entityType === 'ATTRACTION'));\n                }\n            }\n            // If park-specific fetch failed or no data, use destination data\n            if (disneylandAttractions.length === 0 && studiosAttractions.length === 0) {\n                // Try to split by name patterns (fallback)\n                liveDataResponse.liveData.forEach((entity)=>{\n                    if (entity.entityType === 'ATTRACTION') {\n                        // This is a rough split - ideally we'd have parent IDs\n                        if (entity.name.includes('Marvel') || entity.name.includes('Toy Story') || entity.name.includes('Ratatouille') || entity.name.includes('Studio')) {\n                            studiosAttractions.push(entity);\n                        } else {\n                            disneylandAttractions.push(entity);\n                        }\n                    }\n                });\n            }\n            // Transform to our format\n            const transformAttraction = (entity)=>({\n                    id: entity.id,\n                    name: entity.name,\n                    waitTime: entity.queue?.STANDBY?.waitTime ?? null,\n                    status: entity.status || 'CLOSED',\n                    lastUpdated: entity.lastUpdated\n                });\n            return {\n                disneyland: disneylandAttractions.map(transformAttraction),\n                studios: studiosAttractions.map(transformAttraction),\n                timestamp: new Date().toISOString()\n            };\n        } catch (error) {\n            console.error('Failed to fetch live data:', error);\n            // Return mock data as fallback\n            const { mockLiveData } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_api_mockData_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./mockData */ \"(rsc)/./lib/api/mockData.ts\"));\n            return mockLiveData;\n        }\n    }\n}\nconst themeparksAPI = new ThemeParksAPI();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLLEVBQUVDLFNBQVNGLFlBQVk7b0JBQzdDekMsUUFBUXVDLE9BQU92QyxNQUFNLElBQUk7b0JBQ3pCNEMsYUFBYUwsT0FBT0ssV0FBVztnQkFDakM7WUFFQSxPQUFPO2dCQUNMQyxZQUFZbEIsc0JBQXNCbUIsR0FBRyxDQUFDTjtnQkFDdENPLFNBQVNuQixtQkFBbUJrQixHQUFHLENBQUNOO2dCQUNoQ1EsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ25DO1FBQ0YsRUFBRSxPQUFPbkQsT0FBTztZQUNkUCxRQUFRTyxLQUFLLENBQUMsOEJBQThCQTtZQUM1QywrQkFBK0I7WUFDL0IsTUFBTSxFQUFFb0QsWUFBWSxFQUFFLEdBQUcsTUFBTSxzS0FBb0I7WUFDbkQsT0FBT0E7UUFDVDtJQUNGO0FBQ0Y7QUFFTyxNQUFNQyxnQkFBZ0IsSUFBSWhFLGdCQUFnQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzdGllbnN3by5FVVJPUEVcXERvY3VtZW50c1xcR2l0SHViXFxETFdhaXRcXGRscC1xdWV1ZS10cmFja2VyXFxsaWJcXGFwaVxcdGhlbWVwYXJrcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBUElfQkFTRV9VUkwgPSAnaHR0cHM6Ly9hcGkudGhlbWVwYXJrcy53aWtpL3YxJztcblxuLy8gQmFzZWQgb24gdGhlIE9wZW5BUEkgc2NoZW1hXG5leHBvcnQgaW50ZXJmYWNlIEVudGl0eUxpdmVEYXRhIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbnRpdHlUeXBlOiAnREVTVElOQVRJT04nIHwgJ1BBUksnIHwgJ0FUVFJBQ1RJT04nIHwgJ1JFU1RBVVJBTlQnIHwgJ0hPVEVMJyB8ICdTSE9XJztcbiAgc3RhdHVzPzogJ09QRVJBVElORycgfCAnRE9XTicgfCAnQ0xPU0VEJyB8ICdSRUZVUkJJU0hNRU5UJztcbiAgbGFzdFVwZGF0ZWQ6IHN0cmluZztcbiAgcXVldWU/OiB7XG4gICAgU1RBTkRCWT86IHtcbiAgICAgIHdhaXRUaW1lPzogbnVtYmVyIHwgbnVsbDtcbiAgICB9O1xuICAgIFNJTkdMRV9SSURFUj86IHtcbiAgICAgIHdhaXRUaW1lPzogbnVtYmVyIHwgbnVsbDtcbiAgICB9O1xuICAgIFJFVFVSTl9USU1FPzoge1xuICAgICAgc3RhdGU6ICdBVkFJTEFCTEUnIHwgJ1RFTVBfRlVMTCcgfCAnRklOSVNIRUQnO1xuICAgICAgcmV0dXJuU3RhcnQ/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgcmV0dXJuRW5kPzogc3RyaW5nIHwgbnVsbDtcbiAgICB9O1xuICAgIFBBSURfUkVUVVJOX1RJTUU/OiB7XG4gICAgICBzdGF0ZTogJ0FWQUlMQUJMRScgfCAnVEVNUF9GVUxMJyB8ICdGSU5JU0hFRCc7XG4gICAgICByZXR1cm5TdGFydD86IHN0cmluZyB8IG51bGw7XG4gICAgICByZXR1cm5FbmQ/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgcHJpY2U/OiB7XG4gICAgICAgIGFtb3VudDogbnVtYmVyO1xuICAgICAgICBjdXJyZW5jeTogc3RyaW5nO1xuICAgICAgICBmb3JtYXR0ZWQ/OiBzdHJpbmc7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG4gIHNob3d0aW1lcz86IEFycmF5PHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgc3RhcnRUaW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgICBlbmRUaW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgfT47XG4gIG9wZXJhdGluZ0hvdXJzPzogQXJyYXk8e1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBzdGFydFRpbWU/OiBzdHJpbmcgfCBudWxsO1xuICAgIGVuZFRpbWU/OiBzdHJpbmcgfCBudWxsO1xuICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRpdHlMaXZlRGF0YVJlc3BvbnNlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbnRpdHlUeXBlOiBzdHJpbmc7XG4gIHRpbWV6b25lOiBzdHJpbmc7XG4gIGxpdmVEYXRhOiBFbnRpdHlMaXZlRGF0YVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlc3RpbmF0aW9uRW50cnkge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHNsdWc6IHN0cmluZztcbiAgcGFya3M6IEFycmF5PHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW50aXR5U2NoZWR1bGUge1xuICBkYXRlOiBzdHJpbmc7XG4gIG9wZW5pbmdUaW1lOiBzdHJpbmc7XG4gIGNsb3NpbmdUaW1lOiBzdHJpbmc7XG4gIHR5cGU6ICdPUEVSQVRJTkcnIHwgJ1RJQ0tFVEVEX0VWRU5UJyB8ICdQUklWQVRFX0VWRU5UJyB8ICdFWFRSQV9IT1VSUycgfCAnSU5GTyc7XG59XG5cbmNsYXNzIFRoZW1lUGFya3NBUEkge1xuICBwcml2YXRlIGFzeW5jIGZldGNoQVBJPFQ+KGVuZHBvaW50OiBzdHJpbmcpOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCB1cmwgPSBgJHtBUElfQkFTRV9VUkx9JHtlbmRwb2ludH1gO1xuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZzonLCB1cmwpO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgY2FjaGU6ICduby1zdG9yZScgLy8gRGlzYWJsZSBjYWNoaW5nIGZvciByZWFsLXRpbWUgZGF0YVxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc29sZS5lcnJvcihgQVBJIHJlcXVlc3QgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgcmVxdWVzdCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICB9XG5cbiAgYXN5bmMgZ2V0RGVzdGluYXRpb25zKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmZldGNoQVBJPHsgZGVzdGluYXRpb25zOiBEZXN0aW5hdGlvbkVudHJ5W10gfT4oJy9kZXN0aW5hdGlvbnMnKTtcbiAgICByZXR1cm4gZGF0YS5kZXN0aW5hdGlvbnM7XG4gIH1cblxuICBhc3luYyBnZXRFbnRpdHlMaXZlRGF0YShlbnRpdHlJZDogc3RyaW5nKTogUHJvbWlzZTxFbnRpdHlMaXZlRGF0YVJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hBUEk8RW50aXR5TGl2ZURhdGFSZXNwb25zZT4oYC9lbnRpdHkvJHtlbnRpdHlJZH0vbGl2ZWApO1xuICB9XG5cbiAgYXN5bmMgZ2V0RW50aXR5U2NoZWR1bGUoZW50aXR5SWQ6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoQVBJPGFueT4oYC9lbnRpdHkvJHtlbnRpdHlJZH0vc2NoZWR1bGVgKTtcbiAgfVxuXG4gIGFzeW5jIGdldERpc25leWxhbmRQYXJpc0RhdGEoKSB7XG4gICAgLy8gRmlyc3QgZ2V0IGFsbCBkZXN0aW5hdGlvbnMgdG8gZmluZCBEaXNuZXlsYW5kIFBhcmlzXG4gICAgY29uc3QgZGVzdGluYXRpb25zID0gYXdhaXQgdGhpcy5nZXREZXN0aW5hdGlvbnMoKTtcbiAgICBcbiAgICAvLyBGaW5kIERpc25leWxhbmQgUGFyaXMgKHVzdWFsbHkgJ2RscCcgc2x1ZylcbiAgICBjb25zdCBkbHAgPSBkZXN0aW5hdGlvbnMuZmluZChkID0+IFxuICAgICAgZC5zbHVnID09PSAnZGxwJyB8fCBcbiAgICAgIGQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkaXNuZXlsYW5kIHBhcmlzJykgfHxcbiAgICAgIGQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkaXNuZXkgcGFyaXMnKVxuICAgICk7XG4gICAgXG4gICAgaWYgKCFkbHApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Rpc25leWxhbmQgUGFyaXMgbm90IGZvdW5kIGluIGRlc3RpbmF0aW9ucycpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEaXNuZXlsYW5kIFBhcmlzIGRlc3RpbmF0aW9uIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnRm91bmQgRExQOicsIGRscCk7XG4gICAgcmV0dXJuIGRscDtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbERpc25leWxhbmRQYXJpc0xpdmVEYXRhKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgRExQIGRlc3RpbmF0aW9uIGluZm9cbiAgICAgIGNvbnN0IGRscCA9IGF3YWl0IHRoaXMuZ2V0RGlzbmV5bGFuZFBhcmlzRGF0YSgpO1xuICAgICAgXG4gICAgICAvLyBHZXQgbGl2ZSBkYXRhIGZvciB0aGUgZW50aXJlIGRlc3RpbmF0aW9uIChpbmNsdWRlcyBhbGwgcGFya3MpXG4gICAgICBjb25zdCBsaXZlRGF0YVJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRFbnRpdHlMaXZlRGF0YShkbHAuaWQpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgRmV0Y2hlZCAke2xpdmVEYXRhUmVzcG9uc2UubGl2ZURhdGEubGVuZ3RofSBlbnRpdGllc2ApO1xuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSB0d28gcGFya3NcbiAgICAgIGNvbnN0IGRpc25leWxhbmRQYXJrID0gZGxwLnBhcmtzLmZpbmQocCA9PiBcbiAgICAgICAgcC5uYW1lLmluY2x1ZGVzKCdEaXNuZXlsYW5kIFBhcmsnKSB8fCBcbiAgICAgICAgcC5uYW1lID09PSAnUGFyYyBEaXNuZXlsYW5kJ1xuICAgICAgKTtcbiAgICAgIGNvbnN0IHN0dWRpb3NQYXJrID0gZGxwLnBhcmtzLmZpbmQocCA9PiBcbiAgICAgICAgcC5uYW1lLmluY2x1ZGVzKCdTdHVkaW9zJykgfHwgXG4gICAgICAgIHAubmFtZS5pbmNsdWRlcygnU3R1ZGlvJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEZpbHRlciBhdHRyYWN0aW9ucyBieSBwYXJrXG4gICAgICBjb25zdCBkaXNuZXlsYW5kQXR0cmFjdGlvbnM6IEVudGl0eUxpdmVEYXRhW10gPSBbXTtcbiAgICAgIGNvbnN0IHN0dWRpb3NBdHRyYWN0aW9uczogRW50aXR5TGl2ZURhdGFbXSA9IFtdO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBoYXZlIHBhcmsgSURzLCB3ZSBjYW4gZ2V0IG1vcmUgc3BlY2lmaWMgZGF0YVxuICAgICAgaWYgKGRpc25leWxhbmRQYXJrICYmIHN0dWRpb3NQYXJrKSB7XG4gICAgICAgIC8vIFRyeSB0byBnZXQgcGFyay1zcGVjaWZpYyBkYXRhXG4gICAgICAgIGNvbnN0IFtkbHBQYXJrRGF0YSwgc3R1ZGlvc1BhcmtEYXRhXSA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXG4gICAgICAgICAgdGhpcy5nZXRFbnRpdHlMaXZlRGF0YShkaXNuZXlsYW5kUGFyay5pZCksXG4gICAgICAgICAgdGhpcy5nZXRFbnRpdHlMaXZlRGF0YShzdHVkaW9zUGFyay5pZClcbiAgICAgICAgXSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGxwUGFya0RhdGEuc3RhdHVzID09PSAnZnVsZmlsbGVkJykge1xuICAgICAgICAgIGRpc25leWxhbmRBdHRyYWN0aW9ucy5wdXNoKC4uLmRscFBhcmtEYXRhLnZhbHVlLmxpdmVEYXRhLmZpbHRlcihlID0+IGUuZW50aXR5VHlwZSA9PT0gJ0FUVFJBQ1RJT04nKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0dWRpb3NQYXJrRGF0YS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnKSB7XG4gICAgICAgICAgc3R1ZGlvc0F0dHJhY3Rpb25zLnB1c2goLi4uc3R1ZGlvc1BhcmtEYXRhLnZhbHVlLmxpdmVEYXRhLmZpbHRlcihlID0+IGUuZW50aXR5VHlwZSA9PT0gJ0FUVFJBQ1RJT04nKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgcGFyay1zcGVjaWZpYyBmZXRjaCBmYWlsZWQgb3Igbm8gZGF0YSwgdXNlIGRlc3RpbmF0aW9uIGRhdGFcbiAgICAgIGlmIChkaXNuZXlsYW5kQXR0cmFjdGlvbnMubGVuZ3RoID09PSAwICYmIHN0dWRpb3NBdHRyYWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gVHJ5IHRvIHNwbGl0IGJ5IG5hbWUgcGF0dGVybnMgKGZhbGxiYWNrKVxuICAgICAgICBsaXZlRGF0YVJlc3BvbnNlLmxpdmVEYXRhLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgICAgICBpZiAoZW50aXR5LmVudGl0eVR5cGUgPT09ICdBVFRSQUNUSU9OJykge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJvdWdoIHNwbGl0IC0gaWRlYWxseSB3ZSdkIGhhdmUgcGFyZW50IElEc1xuICAgICAgICAgICAgaWYgKGVudGl0eS5uYW1lLmluY2x1ZGVzKCdNYXJ2ZWwnKSB8fCBlbnRpdHkubmFtZS5pbmNsdWRlcygnVG95IFN0b3J5JykgfHwgXG4gICAgICAgICAgICAgICAgZW50aXR5Lm5hbWUuaW5jbHVkZXMoJ1JhdGF0b3VpbGxlJykgfHwgZW50aXR5Lm5hbWUuaW5jbHVkZXMoJ1N0dWRpbycpKSB7XG4gICAgICAgICAgICAgIHN0dWRpb3NBdHRyYWN0aW9ucy5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkaXNuZXlsYW5kQXR0cmFjdGlvbnMucHVzaChlbnRpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyYW5zZm9ybSB0byBvdXIgZm9ybWF0XG4gICAgICBjb25zdCB0cmFuc2Zvcm1BdHRyYWN0aW9uID0gKGVudGl0eTogRW50aXR5TGl2ZURhdGEpID0+ICh7XG4gICAgICAgIGlkOiBlbnRpdHkuaWQsXG4gICAgICAgIG5hbWU6IGVudGl0eS5uYW1lLFxuICAgICAgICB3YWl0VGltZTogZW50aXR5LnF1ZXVlPy5TVEFOREJZPy53YWl0VGltZSA/PyBudWxsLFxuICAgICAgICBzdGF0dXM6IGVudGl0eS5zdGF0dXMgfHwgJ0NMT1NFRCcsXG4gICAgICAgIGxhc3RVcGRhdGVkOiBlbnRpdHkubGFzdFVwZGF0ZWRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaXNuZXlsYW5kOiBkaXNuZXlsYW5kQXR0cmFjdGlvbnMubWFwKHRyYW5zZm9ybUF0dHJhY3Rpb24pLFxuICAgICAgICBzdHVkaW9zOiBzdHVkaW9zQXR0cmFjdGlvbnMubWFwKHRyYW5zZm9ybUF0dHJhY3Rpb24pLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGxpdmUgZGF0YTonLCBlcnJvcik7XG4gICAgICAvLyBSZXR1cm4gbW9jayBkYXRhIGFzIGZhbGxiYWNrXG4gICAgICBjb25zdCB7IG1vY2tMaXZlRGF0YSB9ID0gYXdhaXQgaW1wb3J0KCcuL21vY2tEYXRhJyk7XG4gICAgICByZXR1cm4gbW9ja0xpdmVEYXRhO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdGhlbWVwYXJrc0FQSSA9IG5ldyBUaGVtZVBhcmtzQVBJKCk7Il0sIm5hbWVzIjpbIkFQSV9CQVNFX1VSTCIsIlRoZW1lUGFya3NBUEkiLCJmZXRjaEFQSSIsImVuZHBvaW50IiwidXJsIiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiY2FjaGUiLCJvayIsImVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIkVycm9yIiwianNvbiIsImdldERlc3RpbmF0aW9ucyIsImRhdGEiLCJkZXN0aW5hdGlvbnMiLCJnZXRFbnRpdHlMaXZlRGF0YSIsImVudGl0eUlkIiwiZ2V0RW50aXR5U2NoZWR1bGUiLCJnZXREaXNuZXlsYW5kUGFyaXNEYXRhIiwiZGxwIiwiZmluZCIsImQiLCJzbHVnIiwibmFtZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJnZXRBbGxEaXNuZXlsYW5kUGFyaXNMaXZlRGF0YSIsImxpdmVEYXRhUmVzcG9uc2UiLCJpZCIsImxpdmVEYXRhIiwibGVuZ3RoIiwiZGlzbmV5bGFuZFBhcmsiLCJwYXJrcyIsInAiLCJzdHVkaW9zUGFyayIsImRpc25leWxhbmRBdHRyYWN0aW9ucyIsInN0dWRpb3NBdHRyYWN0aW9ucyIsImRscFBhcmtEYXRhIiwic3R1ZGlvc1BhcmtEYXRhIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJwdXNoIiwidmFsdWUiLCJmaWx0ZXIiLCJlIiwiZW50aXR5VHlwZSIsImZvckVhY2giLCJlbnRpdHkiLCJ0cmFuc2Zvcm1BdHRyYWN0aW9uIiwid2FpdFRpbWUiLCJxdWV1ZSIsIlNUQU5EQlkiLCJsYXN0VXBkYXRlZCIsImRpc25leWxhbmQiLCJtYXAiLCJzdHVkaW9zIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibW9ja0xpdmVEYXRhIiwidGhlbWVwYXJrc0FQSSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/themeparks.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/data-sync.ts":
/*!***********************************!*\
  !*** ./lib/services/data-sync.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataSyncService: () => (/* binding */ DataSyncService)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n/* harmony import */ var _lib_api_themeparks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api/themeparks */ \"(rsc)/./lib/api/themeparks.ts\");\n/* harmony import */ var _downtime_tracker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./downtime-tracker */ \"(rsc)/./lib/services/downtime-tracker.ts\");\n\n\n\nclass DataSyncService {\n    static async syncQueueData() {\n        console.log('[DataSync] Starting queue data sync...');\n        try {\n            // Fetch live data from ThemeParks API\n            const liveData = await _lib_api_themeparks__WEBPACK_IMPORTED_MODULE_1__.themeparksAPI.getAllDisneylandParisLiveData();\n            if (!liveData) {\n                console.error('[DataSync] No data received from API');\n                return {\n                    success: false,\n                    error: 'No data received'\n                };\n            }\n            const timestamp = new Date().toISOString();\n            let recordsInserted = 0;\n            // Process Disneyland Park attractions\n            for (const attraction of liveData.disneyland){\n                try {\n                    // First, ensure the attraction exists in the database\n                    const { error: upsertError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('attractions').upsert({\n                        id: attraction.id,\n                        name: attraction.name,\n                        park_id: 'dae968d5-630d-4719-8b06-3d107e944401',\n                        updated_at: timestamp\n                    }, {\n                        onConflict: 'id'\n                    });\n                    if (upsertError) {\n                        console.error(`[DataSync] Error upserting attraction ${attraction.name}:`, upsertError);\n                        continue;\n                    }\n                    // Get previous status for downtime tracking\n                    const previousStatus = await _downtime_tracker__WEBPACK_IMPORTED_MODULE_2__.DowntimeTracker.getPreviousStatus(attraction.id);\n                    // Insert queue data\n                    const { error: insertError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('queue_data').insert({\n                        attraction_id: attraction.id,\n                        park_id: 'dae968d5-630d-4719-8b06-3d107e944401',\n                        wait_time: attraction.waitTime,\n                        status: attraction.status,\n                        timestamp: timestamp\n                    });\n                    if (insertError) {\n                        console.error(`[DataSync] Error inserting queue data for ${attraction.name}:`, insertError);\n                    } else {\n                        recordsInserted++;\n                        // Track downtime if status changed\n                        if (previousStatus && previousStatus !== attraction.status) {\n                            await _downtime_tracker__WEBPACK_IMPORTED_MODULE_2__.DowntimeTracker.trackDowntime(attraction.id, 'dae968d5-630d-4719-8b06-3d107e944401', attraction.status, previousStatus);\n                        }\n                    }\n                } catch (error) {\n                    console.error(`[DataSync] Error processing attraction ${attraction.name}:`, error);\n                }\n            }\n            // Process Walt Disney Studios Park attractions\n            for (const attraction of liveData.studios){\n                try {\n                    // First, ensure the attraction exists in the database\n                    const { error: upsertError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('attractions').upsert({\n                        id: attraction.id,\n                        name: attraction.name,\n                        park_id: 'ca888437-ebb4-4d50-aed2-d227f7096968',\n                        updated_at: timestamp\n                    }, {\n                        onConflict: 'id'\n                    });\n                    if (upsertError) {\n                        console.error(`[DataSync] Error upserting attraction ${attraction.name}:`, upsertError);\n                        continue;\n                    }\n                    // Get previous status for downtime tracking\n                    const previousStatus = await _downtime_tracker__WEBPACK_IMPORTED_MODULE_2__.DowntimeTracker.getPreviousStatus(attraction.id);\n                    // Insert queue data\n                    const { error: insertError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('queue_data').insert({\n                        attraction_id: attraction.id,\n                        park_id: 'ca888437-ebb4-4d50-aed2-d227f7096968',\n                        wait_time: attraction.waitTime,\n                        status: attraction.status,\n                        timestamp: timestamp\n                    });\n                    if (insertError) {\n                        console.error(`[DataSync] Error inserting queue data for ${attraction.name}:`, insertError);\n                    } else {\n                        recordsInserted++;\n                        // Track downtime if status changed\n                        if (previousStatus && previousStatus !== attraction.status) {\n                            await _downtime_tracker__WEBPACK_IMPORTED_MODULE_2__.DowntimeTracker.trackDowntime(attraction.id, 'ca888437-ebb4-4d50-aed2-d227f7096968', attraction.status, previousStatus);\n                        }\n                    }\n                } catch (error) {\n                    console.error(`[DataSync] Error processing attraction ${attraction.name}:`, error);\n                }\n            }\n            console.log(`[DataSync] Sync completed. Inserted ${recordsInserted} records at ${timestamp}`);\n            // Clean up old data (keep only last 30 days)\n            const thirtyDaysAgo = new Date();\n            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n            const { error: cleanupError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('queue_data').delete().lt('timestamp', thirtyDaysAgo.toISOString());\n            if (cleanupError) {\n                console.error('[DataSync] Error cleaning up old data:', cleanupError);\n            }\n            return {\n                success: true,\n                recordsInserted,\n                timestamp\n            };\n        } catch (error) {\n            console.error('[DataSync] Sync failed:', error);\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : 'Unknown error'\n            };\n        }\n    }\n    static async calculateDailyStats() {\n        console.log('[DataSync] Calculating daily statistics...');\n        try {\n            const today = new Date();\n            today.setHours(0, 0, 0, 0);\n            const tomorrow = new Date(today);\n            tomorrow.setDate(tomorrow.getDate() + 1);\n            // Get all attractions\n            const { data: attractions, error: attractionsError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('attractions').select('id, park_id');\n            if (attractionsError || !attractions) {\n                console.error('[DataSync] Error fetching attractions:', attractionsError);\n                return;\n            }\n            for (const attraction of attractions){\n                // Get today's data for this attraction\n                const { data: queueData, error: queueError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('queue_data').select('wait_time, timestamp').eq('attraction_id', attraction.id).eq('status', 'OPERATING').gte('timestamp', today.toISOString()).lt('timestamp', tomorrow.toISOString()).not('wait_time', 'is', null);\n                if (queueError || !queueData || queueData.length === 0) {\n                    continue;\n                }\n                // Calculate statistics\n                const waitTimes = queueData.map((d)=>d.wait_time).filter((w)=>w !== null);\n                const avgWaitTime = waitTimes.reduce((a, b)=>a + b, 0) / waitTimes.length;\n                const maxWaitTime = Math.max(...waitTimes);\n                const minWaitTime = Math.min(...waitTimes);\n                // Find peak hour\n                const hourlyData = new Map();\n                queueData.forEach((d)=>{\n                    const hour = new Date(d.timestamp).getHours();\n                    if (!hourlyData.has(hour)) {\n                        hourlyData.set(hour, []);\n                    }\n                    if (d.wait_time !== null) {\n                        hourlyData.get(hour).push(d.wait_time);\n                    }\n                });\n                let peakHour = 0;\n                let peakAvg = 0;\n                hourlyData.forEach((times, hour)=>{\n                    const avg = times.reduce((a, b)=>a + b, 0) / times.length;\n                    if (avg > peakAvg) {\n                        peakAvg = avg;\n                        peakHour = hour;\n                    }\n                });\n                // Insert or update daily stats\n                const { error: statsError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('daily_stats').upsert({\n                    attraction_id: attraction.id,\n                    park_id: attraction.park_id,\n                    date: today.toISOString().split('T')[0],\n                    avg_wait_time: avgWaitTime,\n                    max_wait_time: maxWaitTime,\n                    min_wait_time: minWaitTime,\n                    peak_hour: peakHour,\n                    total_samples: queueData.length\n                }, {\n                    onConflict: 'attraction_id,date'\n                });\n                if (statsError) {\n                    console.error(`[DataSync] Error updating daily stats for attraction ${attraction.id}:`, statsError);\n                }\n            }\n            console.log('[DataSync] Daily statistics calculation completed');\n        } catch (error) {\n            console.error('[DataSync] Error calculating daily stats:', error);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8yRSxVQUFVLEVBQUUsR0FBRyxNQUFNcEYsK0RBQWFBLENBQzlDa0IsSUFBSSxDQUFDLGVBQ0xDLE1BQU0sQ0FBQztvQkFDTlUsZUFBZWQsV0FBV0ssRUFBRTtvQkFDNUJFLFNBQVNQLFdBQVdPLE9BQU87b0JBQzNCK0QsTUFBTXpDLE1BQU0vQixXQUFXLEdBQUd5RSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ3ZDQyxlQUFlekI7b0JBQ2YwQixlQUFldEI7b0JBQ2Z1QixlQUFlcEI7b0JBQ2ZxQixXQUFXVjtvQkFDWFcsZUFBZXhDLFVBQVVLLE1BQU07Z0JBQ2pDLEdBQUc7b0JBQ0RoQyxZQUFZO2dCQUNkO2dCQUVGLElBQUk0RCxZQUFZO29CQUNkL0UsUUFBUUksS0FBSyxDQUFDLENBQUMscURBQXFELEVBQUVNLFdBQVdLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRWdFO2dCQUMxRjtZQUNGO1lBRUEvRSxRQUFRQyxHQUFHLENBQUM7UUFDZCxFQUFFLE9BQU9HLE9BQU87WUFDZEosUUFBUUksS0FBSyxDQUFDLDZDQUE2Q0E7UUFDN0Q7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHN0aWVuc3dvLkVVUk9QRVxcRG9jdW1lbnRzXFxHaXRIdWJcXERMV2FpdFxcZGxwLXF1ZXVlLXRyYWNrZXJcXGxpYlxcc2VydmljZXNcXGRhdGEtc3luYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnQC9saWIvc3VwYWJhc2Uvc2VydmVyJztcbmltcG9ydCB7IHRoZW1lcGFya3NBUEkgfSBmcm9tICdAL2xpYi9hcGkvdGhlbWVwYXJrcyc7XG5pbXBvcnQgeyBEb3dudGltZVRyYWNrZXIgfSBmcm9tICcuL2Rvd250aW1lLXRyYWNrZXInO1xuXG5leHBvcnQgY2xhc3MgRGF0YVN5bmNTZXJ2aWNlIHtcbiAgc3RhdGljIGFzeW5jIHN5bmNRdWV1ZURhdGEoKSB7XG4gICAgY29uc29sZS5sb2coJ1tEYXRhU3luY10gU3RhcnRpbmcgcXVldWUgZGF0YSBzeW5jLi4uJyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEZldGNoIGxpdmUgZGF0YSBmcm9tIFRoZW1lUGFya3MgQVBJXG4gICAgICBjb25zdCBsaXZlRGF0YSA9IGF3YWl0IHRoZW1lcGFya3NBUEkuZ2V0QWxsRGlzbmV5bGFuZFBhcmlzTGl2ZURhdGEoKTtcbiAgICAgIFxuICAgICAgaWYgKCFsaXZlRGF0YSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbRGF0YVN5bmNdIE5vIGRhdGEgcmVjZWl2ZWQgZnJvbSBBUEknKTtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gZGF0YSByZWNlaXZlZCcgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgbGV0IHJlY29yZHNJbnNlcnRlZCA9IDA7XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3MgRGlzbmV5bGFuZCBQYXJrIGF0dHJhY3Rpb25zXG4gICAgICBmb3IgKGNvbnN0IGF0dHJhY3Rpb24gb2YgbGl2ZURhdGEuZGlzbmV5bGFuZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEZpcnN0LCBlbnN1cmUgdGhlIGF0dHJhY3Rpb24gZXhpc3RzIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHVwc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgICAuZnJvbSgnYXR0cmFjdGlvbnMnKVxuICAgICAgICAgICAgLnVwc2VydCh7XG4gICAgICAgICAgICAgIGlkOiBhdHRyYWN0aW9uLmlkLFxuICAgICAgICAgICAgICBuYW1lOiBhdHRyYWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgIHBhcmtfaWQ6ICdkYWU5NjhkNS02MzBkLTQ3MTktOGIwNi0zZDEwN2U5NDQ0MDEnLFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0aW1lc3RhbXBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgb25Db25mbGljdDogJ2lkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHVwc2VydEVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbRGF0YVN5bmNdIEVycm9yIHVwc2VydGluZyBhdHRyYWN0aW9uICR7YXR0cmFjdGlvbi5uYW1lfTpgLCB1cHNlcnRFcnJvcik7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IHByZXZpb3VzIHN0YXR1cyBmb3IgZG93bnRpbWUgdHJhY2tpbmdcbiAgICAgICAgICBjb25zdCBwcmV2aW91c1N0YXR1cyA9IGF3YWl0IERvd250aW1lVHJhY2tlci5nZXRQcmV2aW91c1N0YXR1cyhhdHRyYWN0aW9uLmlkKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJbnNlcnQgcXVldWUgZGF0YVxuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgICAuZnJvbSgncXVldWVfZGF0YScpXG4gICAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgYXR0cmFjdGlvbl9pZDogYXR0cmFjdGlvbi5pZCxcbiAgICAgICAgICAgICAgcGFya19pZDogJ2RhZTk2OGQ1LTYzMGQtNDcxOS04YjA2LTNkMTA3ZTk0NDQwMScsXG4gICAgICAgICAgICAgIHdhaXRfdGltZTogYXR0cmFjdGlvbi53YWl0VGltZSxcbiAgICAgICAgICAgICAgc3RhdHVzOiBhdHRyYWN0aW9uLnN0YXR1cyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0RhdGFTeW5jXSBFcnJvciBpbnNlcnRpbmcgcXVldWUgZGF0YSBmb3IgJHthdHRyYWN0aW9uLm5hbWV9OmAsIGluc2VydEVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjb3Jkc0luc2VydGVkKys7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRyYWNrIGRvd250aW1lIGlmIHN0YXR1cyBjaGFuZ2VkXG4gICAgICAgICAgICBpZiAocHJldmlvdXNTdGF0dXMgJiYgcHJldmlvdXNTdGF0dXMgIT09IGF0dHJhY3Rpb24uc3RhdHVzKSB7XG4gICAgICAgICAgICAgIGF3YWl0IERvd250aW1lVHJhY2tlci50cmFja0Rvd250aW1lKFxuICAgICAgICAgICAgICAgIGF0dHJhY3Rpb24uaWQsXG4gICAgICAgICAgICAgICAgJ2RhZTk2OGQ1LTYzMGQtNDcxOS04YjA2LTNkMTA3ZTk0NDQwMScsXG4gICAgICAgICAgICAgICAgYXR0cmFjdGlvbi5zdGF0dXMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNTdGF0dXNcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0RhdGFTeW5jXSBFcnJvciBwcm9jZXNzaW5nIGF0dHJhY3Rpb24gJHthdHRyYWN0aW9uLm5hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQcm9jZXNzIFdhbHQgRGlzbmV5IFN0dWRpb3MgUGFyayBhdHRyYWN0aW9uc1xuICAgICAgZm9yIChjb25zdCBhdHRyYWN0aW9uIG9mIGxpdmVEYXRhLnN0dWRpb3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBGaXJzdCwgZW5zdXJlIHRoZSBhdHRyYWN0aW9uIGV4aXN0cyBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgICBjb25zdCB7IGVycm9yOiB1cHNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgICAgLmZyb20oJ2F0dHJhY3Rpb25zJylcbiAgICAgICAgICAgIC51cHNlcnQoe1xuICAgICAgICAgICAgICBpZDogYXR0cmFjdGlvbi5pZCxcbiAgICAgICAgICAgICAgbmFtZTogYXR0cmFjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICBwYXJrX2lkOiAnY2E4ODg0MzctZWJiNC00ZDUwLWFlZDItZDIyN2Y3MDk2OTY4JyxcbiAgICAgICAgICAgICAgdXBkYXRlZF9hdDogdGltZXN0YW1wXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIG9uQ29uZmxpY3Q6ICdpZCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICh1cHNlcnRFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0RhdGFTeW5jXSBFcnJvciB1cHNlcnRpbmcgYXR0cmFjdGlvbiAke2F0dHJhY3Rpb24ubmFtZX06YCwgdXBzZXJ0RXJyb3IpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCBwcmV2aW91cyBzdGF0dXMgZm9yIGRvd250aW1lIHRyYWNraW5nXG4gICAgICAgICAgY29uc3QgcHJldmlvdXNTdGF0dXMgPSBhd2FpdCBEb3dudGltZVRyYWNrZXIuZ2V0UHJldmlvdXNTdGF0dXMoYXR0cmFjdGlvbi5pZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSW5zZXJ0IHF1ZXVlIGRhdGFcbiAgICAgICAgICBjb25zdCB7IGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgICAgLmZyb20oJ3F1ZXVlX2RhdGEnKVxuICAgICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICAgIGF0dHJhY3Rpb25faWQ6IGF0dHJhY3Rpb24uaWQsXG4gICAgICAgICAgICAgIHBhcmtfaWQ6ICdjYTg4ODQzNy1lYmI0LTRkNTAtYWVkMi1kMjI3ZjcwOTY5NjgnLFxuICAgICAgICAgICAgICB3YWl0X3RpbWU6IGF0dHJhY3Rpb24ud2FpdFRpbWUsXG4gICAgICAgICAgICAgIHN0YXR1czogYXR0cmFjdGlvbi5zdGF0dXMsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtEYXRhU3luY10gRXJyb3IgaW5zZXJ0aW5nIHF1ZXVlIGRhdGEgZm9yICR7YXR0cmFjdGlvbi5uYW1lfTpgLCBpbnNlcnRFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlY29yZHNJbnNlcnRlZCsrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBUcmFjayBkb3dudGltZSBpZiBzdGF0dXMgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKHByZXZpb3VzU3RhdHVzICYmIHByZXZpb3VzU3RhdHVzICE9PSBhdHRyYWN0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgICBhd2FpdCBEb3dudGltZVRyYWNrZXIudHJhY2tEb3dudGltZShcbiAgICAgICAgICAgICAgICBhdHRyYWN0aW9uLmlkLFxuICAgICAgICAgICAgICAgICdjYTg4ODQzNy1lYmI0LTRkNTAtYWVkMi1kMjI3ZjcwOTY5NjgnLFxuICAgICAgICAgICAgICAgIGF0dHJhY3Rpb24uc3RhdHVzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzU3RhdHVzXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtEYXRhU3luY10gRXJyb3IgcHJvY2Vzc2luZyBhdHRyYWN0aW9uICR7YXR0cmFjdGlvbi5uYW1lfTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFtEYXRhU3luY10gU3luYyBjb21wbGV0ZWQuIEluc2VydGVkICR7cmVjb3Jkc0luc2VydGVkfSByZWNvcmRzIGF0ICR7dGltZXN0YW1wfWApO1xuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCBvbGQgZGF0YSAoa2VlcCBvbmx5IGxhc3QgMzAgZGF5cylcbiAgICAgIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBuZXcgRGF0ZSgpO1xuICAgICAgdGhpcnR5RGF5c0Fnby5zZXREYXRlKHRoaXJ0eURheXNBZ28uZ2V0RGF0ZSgpIC0gMzApO1xuICAgICAgXG4gICAgICBjb25zdCB7IGVycm9yOiBjbGVhbnVwRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ3F1ZXVlX2RhdGEnKVxuICAgICAgICAuZGVsZXRlKClcbiAgICAgICAgLmx0KCd0aW1lc3RhbXAnLCB0aGlydHlEYXlzQWdvLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgXG4gICAgICBpZiAoY2xlYW51cEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXRhU3luY10gRXJyb3IgY2xlYW5pbmcgdXAgb2xkIGRhdGE6JywgY2xlYW51cEVycm9yKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICByZWNvcmRzSW5zZXJ0ZWQsIFxuICAgICAgICB0aW1lc3RhbXAgXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRGF0YVN5bmNdIFN5bmMgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyBcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIFxuICBzdGF0aWMgYXN5bmMgY2FsY3VsYXRlRGFpbHlTdGF0cygpIHtcbiAgICBjb25zb2xlLmxvZygnW0RhdGFTeW5jXSBDYWxjdWxhdGluZyBkYWlseSBzdGF0aXN0aWNzLi4uJyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgY29uc3QgdG9tb3Jyb3cgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuICAgICAgXG4gICAgICAvLyBHZXQgYWxsIGF0dHJhY3Rpb25zXG4gICAgICBjb25zdCB7IGRhdGE6IGF0dHJhY3Rpb25zLCBlcnJvcjogYXR0cmFjdGlvbnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnYXR0cmFjdGlvbnMnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgcGFya19pZCcpO1xuICAgICAgXG4gICAgICBpZiAoYXR0cmFjdGlvbnNFcnJvciB8fCAhYXR0cmFjdGlvbnMpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0RhdGFTeW5jXSBFcnJvciBmZXRjaGluZyBhdHRyYWN0aW9uczonLCBhdHRyYWN0aW9uc0Vycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGF0dHJhY3Rpb24gb2YgYXR0cmFjdGlvbnMpIHtcbiAgICAgICAgLy8gR2V0IHRvZGF5J3MgZGF0YSBmb3IgdGhpcyBhdHRyYWN0aW9uXG4gICAgICAgIGNvbnN0IHsgZGF0YTogcXVldWVEYXRhLCBlcnJvcjogcXVldWVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKCdxdWV1ZV9kYXRhJylcbiAgICAgICAgICAuc2VsZWN0KCd3YWl0X3RpbWUsIHRpbWVzdGFtcCcpXG4gICAgICAgICAgLmVxKCdhdHRyYWN0aW9uX2lkJywgYXR0cmFjdGlvbi5pZClcbiAgICAgICAgICAuZXEoJ3N0YXR1cycsICdPUEVSQVRJTkcnKVxuICAgICAgICAgIC5ndGUoJ3RpbWVzdGFtcCcsIHRvZGF5LnRvSVNPU3RyaW5nKCkpXG4gICAgICAgICAgLmx0KCd0aW1lc3RhbXAnLCB0b21vcnJvdy50b0lTT1N0cmluZygpKVxuICAgICAgICAgIC5ub3QoJ3dhaXRfdGltZScsICdpcycsIG51bGwpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHF1ZXVlRXJyb3IgfHwgIXF1ZXVlRGF0YSB8fCBxdWV1ZURhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGF0ZSBzdGF0aXN0aWNzXG4gICAgICAgIGNvbnN0IHdhaXRUaW1lcyA9IHF1ZXVlRGF0YS5tYXAoZCA9PiBkLndhaXRfdGltZSkuZmlsdGVyKHcgPT4gdyAhPT0gbnVsbCkgYXMgbnVtYmVyW107XG4gICAgICAgIGNvbnN0IGF2Z1dhaXRUaW1lID0gd2FpdFRpbWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gd2FpdFRpbWVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbWF4V2FpdFRpbWUgPSBNYXRoLm1heCguLi53YWl0VGltZXMpO1xuICAgICAgICBjb25zdCBtaW5XYWl0VGltZSA9IE1hdGgubWluKC4uLndhaXRUaW1lcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBGaW5kIHBlYWsgaG91clxuICAgICAgICBjb25zdCBob3VybHlEYXRhID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcltdPigpO1xuICAgICAgICBxdWV1ZURhdGEuZm9yRWFjaChkID0+IHtcbiAgICAgICAgICBjb25zdCBob3VyID0gbmV3IERhdGUoZC50aW1lc3RhbXApLmdldEhvdXJzKCk7XG4gICAgICAgICAgaWYgKCFob3VybHlEYXRhLmhhcyhob3VyKSkge1xuICAgICAgICAgICAgaG91cmx5RGF0YS5zZXQoaG91ciwgW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZC53YWl0X3RpbWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhvdXJseURhdGEuZ2V0KGhvdXIpIS5wdXNoKGQud2FpdF90aW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbGV0IHBlYWtIb3VyID0gMDtcbiAgICAgICAgbGV0IHBlYWtBdmcgPSAwO1xuICAgICAgICBob3VybHlEYXRhLmZvckVhY2goKHRpbWVzLCBob3VyKSA9PiB7XG4gICAgICAgICAgY29uc3QgYXZnID0gdGltZXMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyB0aW1lcy5sZW5ndGg7XG4gICAgICAgICAgaWYgKGF2ZyA+IHBlYWtBdmcpIHtcbiAgICAgICAgICAgIHBlYWtBdmcgPSBhdmc7XG4gICAgICAgICAgICBwZWFrSG91ciA9IGhvdXI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluc2VydCBvciB1cGRhdGUgZGFpbHkgc3RhdHNcbiAgICAgICAgY29uc3QgeyBlcnJvcjogc3RhdHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKCdkYWlseV9zdGF0cycpXG4gICAgICAgICAgLnVwc2VydCh7XG4gICAgICAgICAgICBhdHRyYWN0aW9uX2lkOiBhdHRyYWN0aW9uLmlkLFxuICAgICAgICAgICAgcGFya19pZDogYXR0cmFjdGlvbi5wYXJrX2lkLFxuICAgICAgICAgICAgZGF0ZTogdG9kYXkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICAgICAgYXZnX3dhaXRfdGltZTogYXZnV2FpdFRpbWUsXG4gICAgICAgICAgICBtYXhfd2FpdF90aW1lOiBtYXhXYWl0VGltZSxcbiAgICAgICAgICAgIG1pbl93YWl0X3RpbWU6IG1pbldhaXRUaW1lLFxuICAgICAgICAgICAgcGVha19ob3VyOiBwZWFrSG91cixcbiAgICAgICAgICAgIHRvdGFsX3NhbXBsZXM6IHF1ZXVlRGF0YS5sZW5ndGhcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBvbkNvbmZsaWN0OiAnYXR0cmFjdGlvbl9pZCxkYXRlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN0YXRzRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbRGF0YVN5bmNdIEVycm9yIHVwZGF0aW5nIGRhaWx5IHN0YXRzIGZvciBhdHRyYWN0aW9uICR7YXR0cmFjdGlvbi5pZH06YCwgc3RhdHNFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1tEYXRhU3luY10gRGFpbHkgc3RhdGlzdGljcyBjYWxjdWxhdGlvbiBjb21wbGV0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RhdGFTeW5jXSBFcnJvciBjYWxjdWxhdGluZyBkYWlseSBzdGF0czonLCBlcnJvcik7XG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJ0aGVtZXBhcmtzQVBJIiwiRG93bnRpbWVUcmFja2VyIiwiRGF0YVN5bmNTZXJ2aWNlIiwic3luY1F1ZXVlRGF0YSIsImNvbnNvbGUiLCJsb2ciLCJsaXZlRGF0YSIsImdldEFsbERpc25leWxhbmRQYXJpc0xpdmVEYXRhIiwiZXJyb3IiLCJzdWNjZXNzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicmVjb3Jkc0luc2VydGVkIiwiYXR0cmFjdGlvbiIsImRpc25leWxhbmQiLCJ1cHNlcnRFcnJvciIsImZyb20iLCJ1cHNlcnQiLCJpZCIsIm5hbWUiLCJwYXJrX2lkIiwidXBkYXRlZF9hdCIsIm9uQ29uZmxpY3QiLCJwcmV2aW91c1N0YXR1cyIsImdldFByZXZpb3VzU3RhdHVzIiwiaW5zZXJ0RXJyb3IiLCJpbnNlcnQiLCJhdHRyYWN0aW9uX2lkIiwid2FpdF90aW1lIiwid2FpdFRpbWUiLCJzdGF0dXMiLCJ0cmFja0Rvd250aW1lIiwic3R1ZGlvcyIsInRoaXJ0eURheXNBZ28iLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImNsZWFudXBFcnJvciIsImRlbGV0ZSIsImx0IiwiRXJyb3IiLCJtZXNzYWdlIiwiY2FsY3VsYXRlRGFpbHlTdGF0cyIsInRvZGF5Iiwic2V0SG91cnMiLCJ0b21vcnJvdyIsImRhdGEiLCJhdHRyYWN0aW9ucyIsImF0dHJhY3Rpb25zRXJyb3IiLCJzZWxlY3QiLCJxdWV1ZURhdGEiLCJxdWV1ZUVycm9yIiwiZXEiLCJndGUiLCJub3QiLCJsZW5ndGgiLCJ3YWl0VGltZXMiLCJtYXAiLCJkIiwiZmlsdGVyIiwidyIsImF2Z1dhaXRUaW1lIiwicmVkdWNlIiwiYSIsImIiLCJtYXhXYWl0VGltZSIsIk1hdGgiLCJtYXgiLCJtaW5XYWl0VGltZSIsIm1pbiIsImhvdXJseURhdGEiLCJNYXAiLCJmb3JFYWNoIiwiaG91ciIsImdldEhvdXJzIiwiaGFzIiwic2V0IiwiZ2V0IiwicHVzaCIsInBlYWtIb3VyIiwicGVha0F2ZyIsInRpbWVzIiwiYXZnIiwic3RhdHNFcnJvciIsImRhdGUiLCJzcGxpdCIsImF2Z193YWl0X3RpbWUiLCJtYXhfd2FpdF90aW1lIiwibWluX3dhaXRfdGltZSIsInBlYWtfaG91ciIsInRvdGFsX3NhbXBsZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/data-sync.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/downtime-tracker.ts":
/*!******************************************!*\
  !*** ./lib/services/downtime-tracker.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DowntimeTracker: () => (/* binding */ DowntimeTracker)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n\nclass DowntimeTracker {\n    static async trackDowntime(attractionId, parkId, currentStatus, previousStatus) {\n        const timestamp = new Date().toISOString();\n        try {\n            // Check if attraction is going DOWN or into REFURBISHMENT\n            if ((currentStatus === 'DOWN' || currentStatus === 'REFURBISHMENT') && previousStatus === 'OPERATING') {\n                // Start a new downtime period\n                const { error } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('downtime_periods').insert({\n                    attraction_id: attractionId,\n                    park_id: parkId,\n                    down_start: timestamp,\n                    reason: currentStatus\n                });\n                if (error) {\n                    console.error(`[DowntimeTracker] Error starting downtime for ${attractionId}:`, error);\n                } else {\n                    console.log(`[DowntimeTracker] Started downtime tracking for ${attractionId} - Reason: ${currentStatus}`);\n                }\n            } else if (currentStatus === 'OPERATING' && (previousStatus === 'DOWN' || previousStatus === 'REFURBISHMENT')) {\n                // End the current downtime period\n                const { data: activeDowntime, error: fetchError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('downtime_periods').select('*').eq('attraction_id', attractionId).is('down_end', null).order('down_start', {\n                    ascending: false\n                }).limit(1).single();\n                if (fetchError) {\n                    console.error(`[DowntimeTracker] Error fetching active downtime for ${attractionId}:`, fetchError);\n                    return;\n                }\n                if (activeDowntime) {\n                    const downStart = new Date(activeDowntime.down_start);\n                    const downEnd = new Date(timestamp);\n                    const durationMinutes = Math.round((downEnd.getTime() - downStart.getTime()) / 60000);\n                    const { error: updateError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('downtime_periods').update({\n                        down_end: timestamp,\n                        duration_minutes: durationMinutes\n                    }).eq('id', activeDowntime.id);\n                    if (updateError) {\n                        console.error(`[DowntimeTracker] Error ending downtime for ${attractionId}:`, updateError);\n                    } else {\n                        console.log(`[DowntimeTracker] Ended downtime for ${attractionId} - Duration: ${durationMinutes} minutes`);\n                        // Update daily downtime stats\n                        await this.updateDowntimeStats(attractionId, parkId, durationMinutes);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error(`[DowntimeTracker] Error tracking downtime for ${attractionId}:`, error);\n        }\n    }\n    static async updateDowntimeStats(attractionId, parkId, durationMinutes) {\n        const today = new Date().toISOString().split('T')[0];\n        try {\n            // Get existing stats for today\n            const { data: existingStats, error: fetchError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('downtime_stats').select('*').eq('attraction_id', attractionId).eq('date', today).single();\n            if (fetchError && fetchError.code !== 'PGRST116') {\n                console.error(`[DowntimeTracker] Error fetching downtime stats:`, fetchError);\n                return;\n            }\n            if (existingStats) {\n                // Update existing stats\n                const { error: updateError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('downtime_stats').update({\n                    total_downtime_minutes: (existingStats.total_downtime_minutes || 0) + durationMinutes,\n                    downtime_count: (existingStats.downtime_count || 0) + 1,\n                    longest_downtime_minutes: Math.max(existingStats.longest_downtime_minutes || 0, durationMinutes),\n                    updated_at: new Date().toISOString()\n                }).eq('id', existingStats.id);\n                if (updateError) {\n                    console.error(`[DowntimeTracker] Error updating downtime stats:`, updateError);\n                }\n            } else {\n                // Create new stats record\n                const { error: insertError } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('downtime_stats').insert({\n                    attraction_id: attractionId,\n                    park_id: parkId,\n                    date: today,\n                    total_downtime_minutes: durationMinutes,\n                    downtime_count: 1,\n                    longest_downtime_minutes: durationMinutes,\n                    operating_minutes: 0 // Will be calculated at end of day\n                });\n                if (insertError) {\n                    console.error(`[DowntimeTracker] Error creating downtime stats:`, insertError);\n                }\n            }\n        } catch (error) {\n            console.error(`[DowntimeTracker] Error updating downtime stats:`, error);\n        }\n    }\n    static async getPreviousStatus(attractionId) {\n        try {\n            const { data, error } = await _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('queue_data').select('status').eq('attraction_id', attractionId).order('timestamp', {\n                ascending: false\n            }).limit(2);\n            if (error || !data || data.length < 2) {\n                return null;\n            }\n            return data[1].status;\n        } catch (error) {\n            console.error(`[DowntimeTracker] Error getting previous status:`, error);\n            return null;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUIsRUFBRSxtQ0FBbUM7Z0JBQzFEO2dCQUVGLElBQUlGLGFBQWE7b0JBQ2ZqQyxRQUFRUCxLQUFLLENBQUMsQ0FBQyxnREFBZ0QsQ0FBQyxFQUFFd0M7Z0JBQ3BFO1lBQ0Y7UUFDRixFQUFFLE9BQU94QyxPQUFPO1lBQ2RPLFFBQVFQLEtBQUssQ0FBQyxDQUFDLGdEQUFnRCxDQUFDLEVBQUVBO1FBQ3BFO0lBQ0Y7SUFFQSxhQUFhMkMsa0JBQWtCbEQsWUFBb0IsRUFBMEI7UUFDM0UsSUFBSTtZQUNGLE1BQU0sRUFBRWdCLElBQUksRUFBRVQsS0FBSyxFQUFFLEdBQUcsTUFBTVYsK0RBQWFBLENBQ3hDVyxJQUFJLENBQUMsY0FDTFcsTUFBTSxDQUFDLFVBQ1BDLEVBQUUsQ0FBQyxpQkFBaUJwQixjQUNwQnNCLEtBQUssQ0FBQyxhQUFhO2dCQUFFQyxXQUFXO1lBQU0sR0FDdENDLEtBQUssQ0FBQztZQUVULElBQUlqQixTQUFTLENBQUNTLFFBQVFBLEtBQUttQyxNQUFNLEdBQUcsR0FBRztnQkFDckMsT0FBTztZQUNUO1lBRUEsT0FBT25DLElBQUksQ0FBQyxFQUFFLENBQUNvQyxNQUFNO1FBQ3ZCLEVBQUUsT0FBTzdDLE9BQU87WUFDZE8sUUFBUVAsS0FBSyxDQUFDLENBQUMsZ0RBQWdELENBQUMsRUFBRUE7WUFDbEUsT0FBTztRQUNUO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzdGllbnN3by5FVVJPUEVcXERvY3VtZW50c1xcR2l0SHViXFxETFdhaXRcXGRscC1xdWV1ZS10cmFja2VyXFxsaWJcXHNlcnZpY2VzXFxkb3dudGltZS10cmFja2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInO1xuXG5leHBvcnQgY2xhc3MgRG93bnRpbWVUcmFja2VyIHtcbiAgc3RhdGljIGFzeW5jIHRyYWNrRG93bnRpbWUoYXR0cmFjdGlvbklkOiBzdHJpbmcsIHBhcmtJZDogc3RyaW5nLCBjdXJyZW50U3RhdHVzOiBzdHJpbmcsIHByZXZpb3VzU3RhdHVzPzogc3RyaW5nKSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBhdHRyYWN0aW9uIGlzIGdvaW5nIERPV04gb3IgaW50byBSRUZVUkJJU0hNRU5UXG4gICAgICBpZiAoKGN1cnJlbnRTdGF0dXMgPT09ICdET1dOJyB8fCBjdXJyZW50U3RhdHVzID09PSAnUkVGVVJCSVNITUVOVCcpICYmIFxuICAgICAgICAgIHByZXZpb3VzU3RhdHVzID09PSAnT1BFUkFUSU5HJykge1xuICAgICAgICAvLyBTdGFydCBhIG5ldyBkb3dudGltZSBwZXJpb2RcbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKCdkb3dudGltZV9wZXJpb2RzJylcbiAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgIGF0dHJhY3Rpb25faWQ6IGF0dHJhY3Rpb25JZCxcbiAgICAgICAgICAgIHBhcmtfaWQ6IHBhcmtJZCxcbiAgICAgICAgICAgIGRvd25fc3RhcnQ6IHRpbWVzdGFtcCxcbiAgICAgICAgICAgIHJlYXNvbjogY3VycmVudFN0YXR1c1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0Rvd250aW1lVHJhY2tlcl0gRXJyb3Igc3RhcnRpbmcgZG93bnRpbWUgZm9yICR7YXR0cmFjdGlvbklkfTpgLCBlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtEb3dudGltZVRyYWNrZXJdIFN0YXJ0ZWQgZG93bnRpbWUgdHJhY2tpbmcgZm9yICR7YXR0cmFjdGlvbklkfSAtIFJlYXNvbjogJHtjdXJyZW50U3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGF0dHJhY3Rpb24gaXMgY29taW5nIGJhY2sgT05MSU5FXG4gICAgICBlbHNlIGlmIChjdXJyZW50U3RhdHVzID09PSAnT1BFUkFUSU5HJyAmJiBcbiAgICAgICAgICAgICAgIChwcmV2aW91c1N0YXR1cyA9PT0gJ0RPV04nIHx8IHByZXZpb3VzU3RhdHVzID09PSAnUkVGVVJCSVNITUVOVCcpKSB7XG4gICAgICAgIC8vIEVuZCB0aGUgY3VycmVudCBkb3dudGltZSBwZXJpb2RcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhY3RpdmVEb3dudGltZSwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbSgnZG93bnRpbWVfcGVyaW9kcycpXG4gICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgLmVxKCdhdHRyYWN0aW9uX2lkJywgYXR0cmFjdGlvbklkKVxuICAgICAgICAgIC5pcygnZG93bl9lbmQnLCBudWxsKVxuICAgICAgICAgIC5vcmRlcignZG93bl9zdGFydCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAgIC5saW1pdCgxKVxuICAgICAgICAgIC5zaW5nbGUoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmZXRjaEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0Rvd250aW1lVHJhY2tlcl0gRXJyb3IgZmV0Y2hpbmcgYWN0aXZlIGRvd250aW1lIGZvciAke2F0dHJhY3Rpb25JZH06YCwgZmV0Y2hFcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoYWN0aXZlRG93bnRpbWUpIHtcbiAgICAgICAgICBjb25zdCBkb3duU3RhcnQgPSBuZXcgRGF0ZShhY3RpdmVEb3dudGltZS5kb3duX3N0YXJ0KTtcbiAgICAgICAgICBjb25zdCBkb3duRW5kID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbk1pbnV0ZXMgPSBNYXRoLnJvdW5kKChkb3duRW5kLmdldFRpbWUoKSAtIGRvd25TdGFydC5nZXRUaW1lKCkpIC8gNjAwMDApO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgICAuZnJvbSgnZG93bnRpbWVfcGVyaW9kcycpXG4gICAgICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICAgICAgZG93bl9lbmQ6IHRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgZHVyYXRpb25fbWludXRlczogZHVyYXRpb25NaW51dGVzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVxKCdpZCcsIGFjdGl2ZURvd250aW1lLmlkKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtEb3dudGltZVRyYWNrZXJdIEVycm9yIGVuZGluZyBkb3dudGltZSBmb3IgJHthdHRyYWN0aW9uSWR9OmAsIHVwZGF0ZUVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtEb3dudGltZVRyYWNrZXJdIEVuZGVkIGRvd250aW1lIGZvciAke2F0dHJhY3Rpb25JZH0gLSBEdXJhdGlvbjogJHtkdXJhdGlvbk1pbnV0ZXN9IG1pbnV0ZXNgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIGRhaWx5IGRvd250aW1lIHN0YXRzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZURvd250aW1lU3RhdHMoYXR0cmFjdGlvbklkLCBwYXJrSWQsIGR1cmF0aW9uTWludXRlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtEb3dudGltZVRyYWNrZXJdIEVycm9yIHRyYWNraW5nIGRvd250aW1lIGZvciAke2F0dHJhY3Rpb25JZH06YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuICBcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZURvd250aW1lU3RhdHMoYXR0cmFjdGlvbklkOiBzdHJpbmcsIHBhcmtJZDogc3RyaW5nLCBkdXJhdGlvbk1pbnV0ZXM6IG51bWJlcikge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBleGlzdGluZyBzdGF0cyBmb3IgdG9kYXlcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdTdGF0cywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2Rvd250aW1lX3N0YXRzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgnYXR0cmFjdGlvbl9pZCcsIGF0dHJhY3Rpb25JZClcbiAgICAgICAgLmVxKCdkYXRlJywgdG9kYXkpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGZldGNoRXJyb3IgJiYgZmV0Y2hFcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtEb3dudGltZVRyYWNrZXJdIEVycm9yIGZldGNoaW5nIGRvd250aW1lIHN0YXRzOmAsIGZldGNoRXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChleGlzdGluZ1N0YXRzKSB7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBzdGF0c1xuICAgICAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKCdkb3dudGltZV9zdGF0cycpXG4gICAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgICB0b3RhbF9kb3dudGltZV9taW51dGVzOiAoZXhpc3RpbmdTdGF0cy50b3RhbF9kb3dudGltZV9taW51dGVzIHx8IDApICsgZHVyYXRpb25NaW51dGVzLFxuICAgICAgICAgICAgZG93bnRpbWVfY291bnQ6IChleGlzdGluZ1N0YXRzLmRvd250aW1lX2NvdW50IHx8IDApICsgMSxcbiAgICAgICAgICAgIGxvbmdlc3RfZG93bnRpbWVfbWludXRlczogTWF0aC5tYXgoZXhpc3RpbmdTdGF0cy5sb25nZXN0X2Rvd250aW1lX21pbnV0ZXMgfHwgMCwgZHVyYXRpb25NaW51dGVzKSxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVxKCdpZCcsIGV4aXN0aW5nU3RhdHMuaWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0Rvd250aW1lVHJhY2tlcl0gRXJyb3IgdXBkYXRpbmcgZG93bnRpbWUgc3RhdHM6YCwgdXBkYXRlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDcmVhdGUgbmV3IHN0YXRzIHJlY29yZFxuICAgICAgICBjb25zdCB7IGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKCdkb3dudGltZV9zdGF0cycpXG4gICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICBhdHRyYWN0aW9uX2lkOiBhdHRyYWN0aW9uSWQsXG4gICAgICAgICAgICBwYXJrX2lkOiBwYXJrSWQsXG4gICAgICAgICAgICBkYXRlOiB0b2RheSxcbiAgICAgICAgICAgIHRvdGFsX2Rvd250aW1lX21pbnV0ZXM6IGR1cmF0aW9uTWludXRlcyxcbiAgICAgICAgICAgIGRvd250aW1lX2NvdW50OiAxLFxuICAgICAgICAgICAgbG9uZ2VzdF9kb3dudGltZV9taW51dGVzOiBkdXJhdGlvbk1pbnV0ZXMsXG4gICAgICAgICAgICBvcGVyYXRpbmdfbWludXRlczogMCAvLyBXaWxsIGJlIGNhbGN1bGF0ZWQgYXQgZW5kIG9mIGRheVxuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGluc2VydEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0Rvd250aW1lVHJhY2tlcl0gRXJyb3IgY3JlYXRpbmcgZG93bnRpbWUgc3RhdHM6YCwgaW5zZXJ0RXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtEb3dudGltZVRyYWNrZXJdIEVycm9yIHVwZGF0aW5nIGRvd250aW1lIHN0YXRzOmAsIGVycm9yKTtcbiAgICB9XG4gIH1cbiAgXG4gIHN0YXRpYyBhc3luYyBnZXRQcmV2aW91c1N0YXR1cyhhdHRyYWN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdxdWV1ZV9kYXRhJylcbiAgICAgICAgLnNlbGVjdCgnc3RhdHVzJylcbiAgICAgICAgLmVxKCdhdHRyYWN0aW9uX2lkJywgYXR0cmFjdGlvbklkKVxuICAgICAgICAub3JkZXIoJ3RpbWVzdGFtcCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAubGltaXQoMik7XG4gICAgICBcbiAgICAgIGlmIChlcnJvciB8fCAhZGF0YSB8fCBkYXRhLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhWzFdLnN0YXR1cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgW0Rvd250aW1lVHJhY2tlcl0gRXJyb3IgZ2V0dGluZyBwcmV2aW91cyBzdGF0dXM6YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJEb3dudGltZVRyYWNrZXIiLCJ0cmFja0Rvd250aW1lIiwiYXR0cmFjdGlvbklkIiwicGFya0lkIiwiY3VycmVudFN0YXR1cyIsInByZXZpb3VzU3RhdHVzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZXJyb3IiLCJmcm9tIiwiaW5zZXJ0IiwiYXR0cmFjdGlvbl9pZCIsInBhcmtfaWQiLCJkb3duX3N0YXJ0IiwicmVhc29uIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJhY3RpdmVEb3dudGltZSIsImZldGNoRXJyb3IiLCJzZWxlY3QiLCJlcSIsImlzIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsaW1pdCIsInNpbmdsZSIsImRvd25TdGFydCIsImRvd25FbmQiLCJkdXJhdGlvbk1pbnV0ZXMiLCJNYXRoIiwicm91bmQiLCJnZXRUaW1lIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJkb3duX2VuZCIsImR1cmF0aW9uX21pbnV0ZXMiLCJpZCIsInVwZGF0ZURvd250aW1lU3RhdHMiLCJ0b2RheSIsInNwbGl0IiwiZXhpc3RpbmdTdGF0cyIsImNvZGUiLCJ0b3RhbF9kb3dudGltZV9taW51dGVzIiwiZG93bnRpbWVfY291bnQiLCJsb25nZXN0X2Rvd250aW1lX21pbnV0ZXMiLCJtYXgiLCJ1cGRhdGVkX2F0IiwiaW5zZXJ0RXJyb3IiLCJkYXRlIiwib3BlcmF0aW5nX21pbnV0ZXMiLCJnZXRQcmV2aW91c1N0YXR1cyIsImxlbmd0aCIsInN0YXR1cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/downtime-tracker.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://bthqgsjbnvghccxtdihe.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_KEY;\n// Server-side client with service key for admin operations\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW9EO0FBRXBELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CO0FBRTNELDJEQUEyRDtBQUNwRCxNQUFNQyxnQkFBZ0JQLG1FQUFZQSxDQUFDQyxhQUFhSSxvQkFBbUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcc3RpZW5zd28uRVVST1BFXFxEb2N1bWVudHNcXEdpdEh1YlxcRExXYWl0XFxkbHAtcXVldWUtdHJhY2tlclxcbGliXFxzdXBhYmFzZVxcc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX0tFWSFcblxuLy8gU2VydmVyLXNpZGUgY2xpZW50IHdpdGggc2VydmljZSBrZXkgZm9yIGFkbWluIG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfS0VZIiwic3VwYWJhc2VBZG1pbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsync%2Froute&page=%2Fapi%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsync%2Froute&page=%2Fapi%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_stienswo_EUROPE_Documents_GitHub_DLWait_dlp_queue_tracker_app_api_sync_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/sync/route.ts */ \"(rsc)/./app/api/sync/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/sync/route\",\n        pathname: \"/api/sync\",\n        filename: \"route\",\n        bundlePath: \"app/api/sync/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\stienswo.EUROPE\\\\Documents\\\\GitHub\\\\DLWait\\\\dlp-queue-tracker\\\\app\\\\api\\\\sync\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_stienswo_EUROPE_Documents_GitHub_DLWait_dlp_queue_tracker_app_api_sync_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/sync/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZzeW5jJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzeW5jJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc3luYyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNzdGllbnN3by5FVVJPUEUlNUNEb2N1bWVudHMlNUNHaXRIdWIlNUNETFdhaXQlNUNkbHAtcXVldWUtdHJhY2tlciU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDc3RpZW5zd28uRVVST1BFJTVDRG9jdW1lbnRzJTVDR2l0SHViJTVDRExXYWl0JTVDZGxwLXF1ZXVlLXRyYWNrZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNkO0FBQ1M7QUFDTztBQUNLO0FBQ21DO0FBQ2pEO0FBQ087QUFDZjtBQUNzQztBQUN6QjtBQUNNO0FBQ0M7QUFDaEI7QUFDNkQ7QUFDL0g7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVD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LDZDQUE2QywwRkFBcUI7QUFDbEU7QUFDQSxrQkFBa0IsNkVBQVk7QUFDOUI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQSw0Q0FBNEMsNkZBQWU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHN0aWVuc3dvLkVVUk9QRVxcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXERMV2FpdFxcXFxkbHAtcXVldWUtdHJhY2tlclxcXFxhcHBcXFxcYXBpXFxcXHN5bmNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3N5bmMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zeW5jXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zeW5jL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHN0aWVuc3dvLkVVUk9QRVxcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXERMV2FpdFxcXFxkbHAtcXVldWUtdHJhY2tlclxcXFxhcHBcXFxcYXBpXFxcXHN5bmNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9zeW5jL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiB3ZSBhcmVuJ3Qgd3JhcHBlZCBieSBiYXNlLXNlcnZlciBoYW5kbGUgaGVyZVxuICAgICAgICBpZiAoIWFjdGl2ZVNwYW4gJiYgIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsync%2Froute&page=%2Fapi%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsync%2Froute&page=%2Fapi%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cstienswo.EUROPE%5CDocuments%5CGitHub%5CDLWait%5Cdlp-queue-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();